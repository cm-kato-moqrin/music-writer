# 楽曲分析

あなたが作った曲やアレンジを分析し、フィードバックを提供します。

## 引数

$ARGUMENTS - 分析の観点（省略可）

例：
- `/analyze` （総合分析）
- `/analyze コード進行`
- `/analyze ベースライン`
- `/analyze ドラムパターン`
- `/analyze リズムセクション`

## 入力形式

以下の情報をできるだけ共有してください：

```
【楽曲情報】
タイトル：（任意）
ジャンル：
キー：
BPM：
拍子：

【コード進行】
|セクション名|
|コード1 |コード2 |コード3 |コード4 |

【ベースライン】
|  1拍目  |  2拍目  |  3拍目  |  4拍目  |
|1 e + a |2 e + a |3 e + a |4 e + a |
|音名...|

【ドラムパターン】（あれば）
|1 e + a |2 e + a |3 e + a |4 e + a |
|HH行|
|SD行|
|BD行|

【その他】
- 意図したこと
- 悩んでいる点
- 参考にした曲
```

## 出力形式

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━
🎵 楽曲分析：{タイトル/説明}
━━━━━━━━━━━━━━━━━━━━━━━━━━━

■ 全体の印象
{ジャンル感、雰囲気、完成度}

■ コード進行分析
- 進行のタイプ：{何系の進行か}
- 機能分析：{トニック、ドミナント等}
- 特徴：{良い点、特徴的な点}

■ ベースライン分析
- コードとの関係：{コードトーンの使い方}
- リズム：{リズムパターンの特徴}
- 動き：{音の動き方、アプローチ}
- ドラムとの連携：{キックとの関係等}

■ ドラムパターン分析（あれば）
- パターンの特徴：{ジャンル適合性}
- グルーヴ：{全体のリズム感}
- ベースとの相性：{連携度}

■ 良い点
- {良い点1}
- {良い点2}
- {良い点3}

■ 改善提案
- {提案1}
  → 具体例：{グリッド形式で}
- {提案2}
  → 具体例：{グリッド形式で}

■ 発展アイデア
- {このフレーズを発展させる方法}
- {バリエーションの提案}

━━━━━━━━━━━━━━━━━━━━━━━━━━━
💡 関連コマンド：
- `/theory {関連トピック}` で理論を深掘り
- `/jaco {要素}` でジャコ風にアレンジ
━━━━━━━━━━━━━━━━━━━━━━━━━━━
```

## 分析の観点

### コード進行
- ダイアトニック内か、借用コードがあるか
- 機能（T/SD/D）の流れ
- 解決感、緊張感のバランス

### ベースライン
- コードトーン（1, 3, 5, 7）の使い方
- アプローチノートの使い方
- リズムの特徴（シンコペーション等）
- ルート以外の音の選択

### ドラムパターン
- ジャンルとの適合性
- キックとスネアの配置
- ハイハットの刻み方
- フィルの効果

### リズムセクション全体
- ベースとキックの関係
- グルーヴの一体感
- 空間の使い方

## 注意

- 良い点を必ず見つけて伝える
- 改善提案は具体的にグリッド形式で示す
- ユーザーの意図を尊重する
- 現在のフェーズに応じたアドバイスをする
